
The configuration file (sample in ini/sample_1.ini, ini/smaple_2.ini) needs to contain information about each model. This information is used for a small number of cases and the format is not yet stable. 

The current default is to use relative paths for the shelves which contain information about the requested subset. This should probably be altered to use abolsute paths relative to a directory specified on installation.

requested_subset_decision_tree_v0_4.pdf contains a description of the logical steps of the algorithm.

Usage as follows:

## import module
import p_cmip5_v5 as p

## create and instance of the cmip5_product class, specifying a configuration file
##
pc2 = p.cmip5_product( config='ini/sample_2.ini')

## test a file: using the variable, mip table, experiment id, model and specifying the path of the atomic dataset directory containing all
## the submitted files.
## In some cases the decision as to which product the file belongs in will depend on the contents of this directory. 
## verbose=True results in additional messages being printed to standard out.

if pc2.find_product( var, mip, expt,model,path,startyear=startyear, verbose=verbose):
  print 'product is: ', pc2.product

##  A True return means the method has identified the product
else:
##  A False return means the product could not be identified
  print 'dont know what to do with this data:: ',pc2.reason



The configuration file.

The configuration file should contain one section for each model, containing values for:
category: either 'centennial' or 'decadal' -- specifies which suite of experiments the model is being used for.
year_piControl_spawn_to_historical: year of the piControl data used to initiate the historical run
year_historical_start: year of the start of the historical run
year_piControl_spawn_to_abrupt4xco2: year of the piControl data used to initiate the abrupt4xco2 run
year_start_abrupt4xco2=2050: year of start of the abrupt4xco2 run
year_piControl spawn_to_1pctCo2: year of the piControl data used to initiate the 1pctCo2 run
year_start_1pctCo2: ear of start of the 1pctCo2 run

The first 3 are required [catgory, year_piControl_spawn_to_historical, year_historical_start] for processing piControl data in MIP tables aero, day, 6hrPlev and 3hr.
The others are optional but may improve the consistency of data prioritised for replication.
